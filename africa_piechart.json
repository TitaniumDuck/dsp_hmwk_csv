{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",

  "data": {
  "url": "https://raw.githubusercontent.com/TitaniumDuck/dsp_hmwk_csv/refs/heads/main/DSP_HMWK_04_DATA.csv",
  "format": {"type": "csv"}},

  "title":
  {
    "text": "Top African Countries By Population",
    "anchor": "middle",
    "fontSize": 16
  },
  
  "mark": "arc",

  "transform": 
  [
    {"filter": "datum.inAfrica == 1"},
    {"window": 
      [
        {"op": "rank", "as": "Rank"}
      ]
    },

    {"calculate": "datum.Rank <= 20 ? datum.Country: 'Other'", "as": "Group"},

    {
      "aggregate": 
      [
        {"op": "sum", "field": "Population", "as": "GroupPopulation"}
      ],
      "groupby": ["Group"]
    }
  ],

  "encoding": 
  {
    "theta":
    {
      "field": "GroupPopulation", "type": "quantitative"
    },
    "color": 
    {
      "field": "Group", "type": "nominal",
      "scale": 
      {
        "range": 
        [
          "#DB5656", "#DB7956", "#DB9C56", "#DBBF56", "#D4DB56", "#B1DB56", "#8EDB56","#6BDB56", "#56DB64", "#56DB87", "#56DBAA", "#56DBCD","#56C6DB", "#56A3DB", "#5680DB", "#565DDB", "#888888", "#7256DB", "#9556DB", "#B856DB", "#DB56DB"
        ]
      }
    }
  } 
}
